<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//code.jquery.com/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="../public/css/style.css">
    
    <script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
    <link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <title>FORM</title>
    <%  var jsonObject=JSON.parse(json) %>
    <%  var formComponents=jsonObject.formComponents %>
    
    
</head>
    <body>
        
        <div id="content">
                <nav class="navbar navbar-light bg-light">
                    <a class="navbar-brand">Form</a>
                    <form class="form-inline">
                        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">보내기</button>
                    </form>
                </nav>
        </div>
        

        <div class="container">
                <div><h1><%= title  %></h1></div>
                <div><h3><%= description  %></h3></div>
                <form action='/result' id='result' method='post'>
                    <div style="display: none">
                        <input type="text" class="form-control" name="form_id" value="<%=form_id%>">
                        <input type="text" class="form-control" name="userEmail" value="<%=user_email%>">
                    </div>
                    
                <% for(var i=0;i<formComponents.length;i++){ %>
                    <%  var mType=formComponents[i].type %>
                    
                    <% if(mType==0 || mType==1){ %>
                        <div id="type1">
                            <div class="form-group" style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px">
                                <label name='title'><%= formComponents[i].question  %></label>
                                <textarea class="form-control" name=<%=i %>></textarea>
                            </div>
                        </div>
                    <% }else if(mType==2 || mType==3 || mType==4 ){ %>
                        <div id="type1">
                            <div class="form-group" style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px">
                                <label name='title'><%= formComponents[i].question  %></label>
                                <%  var jsonArray=formComponents[i].addedOption %>
                                <% if(mType==2){ %>
                                    <% for(var j=0;j<jsonArray.length;j++){ %>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="<%=i%>check<%=j%>" name=<%= i  %> value=<%= jsonArray[j] %>>
                                        <label class="form-check-label" for="<%=i%>check<%=j%>">
                                                <%= jsonArray[j] %>
                                        </label>
                                    </div>
                                    <% } %>
                                <% }else if(mType==3){ %>
                                    <% for(var j=0;j<jsonArray.length;j++){ %>
                                        <div class="form-check" style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px">
                                            <input class="form-check-input" type="checkbox" id="<%=i%>check<%=j%>" name=<%= i  %> value=<%= jsonArray[j] %>>
                                            <label class="form-check-label" for="<%=i%>check<%=j%>">
                                                    <%= jsonArray[j] %>
                                            </label>
                                        </div>
                                    <% } %>
                                <% }else if(mType==4){ %>
                                    <div class="dropdown">
                                        
                                        <select id="inputState" class="form-control" name=<%= i  %>>
                                                <option>선택...</option>
                                                <% for(var j=0;j<jsonArray.length;j++){ %>
                                                    <option value=<%= jsonArray[j] %>><%= jsonArray[j] %></option>
                                                <% } %>
                                        </select>
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    <% } else if(mType==5){%>
                        <div class="form-group"  style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px">
                            <label name='title'><%= formComponents[i].question  %></label>
                            <div></div>
                        <%  var begin=formComponents[i].begin %>
                        <%  var end=formComponents[i].end+3 %>
                            <label style="visibility: hidden"><%= formComponents[i].begin_label %></label>
                        <% for(var j=0;j<end-begin+1;j++){ %>
                            <div class="form-check form-check-inline">
                                <label class="form-check-label" style="margin: 12px"><%=j %></label>
                            </div>
                        <%} %>
                            <div></div>
                            <label><%= formComponents[i].begin_label %></label>
                        <% for(var j=0;j<end-begin+1;j++){ %>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" style="margin: 10px" type="radio" name=<%= i  %> value=<%=j %>>
                            </div>
                        <%} %>
                            <label><%= formComponents[i].end_label %></label>
                        </div>
                    <% } else if(mType==6||mType==7){%>
                        <%  var colArray=formComponents[i].addedColOption %>
                        <%  var rowArray=formComponents[i].addedRowOption %>
                        <div class="form-group"  style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px">
                            <label name='title'><%= formComponents[i].question  %></label>
                            <div></div>
                            <table class="table table-borderless">
                                <thead>
                                    <tr>
                                        <th scope="col"></th>
                                        <% for(var j=0;j<colArray.length;j++){ %>
                                            <th scope="col"><%=colArray[j] %></th>
                                        <% } %>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% for(var j=0;j<rowArray.length;j++){ %>
                                        <tr>
                                            <th scope="row"><%= j+1%></th>
                                            <% for(var k=0;k<colArray.length;k++){ %>
                                                <td>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input grid" style="margin: 10px" type="radio" name=<%=i %><%='-' %><%=j %> value=<%=k %>>
                                                    </div>
                                                </td>
                                            <% } %>
                                        </tr>
                                    <% } %>
                                </tbody>
                            </table>
                        </div>
                    <% } else if(mType==8){%>
                        <!-- 날짜-->
                        <div class="form-group">
                                <label><%= formComponents[i].question  %></label>
                                <input class="form-control" data-date-format="yyyy/mm/dd" id="datepicker" name=<%=i %>>
                        </div>
                    
                    <% } else if(mType==9){%>
                        <!-- 시간-->
                        <div class="form-group">
                                <label><%= formComponents[i].question  %></label>
                                <input id="timepicker" class="form-control" name=<%=i %>/>
                        </div>
                    <% } else if(mType==10){%>
                        <!-- 구획분할-->
                        <div class="form-group" style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px; background:#2c81e2">
                            <div>
                                <label style="color: aliceblue"><%= formComponents[i].title  %></label>
                            </div>
                            <div>
                                <label style="color: aliceblue"><%= formComponents[i].description  %></label>
                            </div>
                        </div>
                    <% } else if(mType==11){%>
                        <!-- 설명추가-->
                        <div class="form-group" style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px; background: azure">
                                <div>
                                    <label style="color: aliceblue"><%= formComponents[i].title  %></label>
                                </div>
                                <div>
                                    <label style="color: aliceblue"><%= formComponents[i].description  %></label>
                                </div>
                        </div>
                    <% } else if(mType==12){ %>
                        <div id="type12">
                            <div class="form-group" style="border :2px solid rgb(255, 255, 255);border-radius: 20px;padding: 15px">
                                <div>
                                    <label name='title'><%= formComponents[i].question  %></label>
                                </div>
                                <div>
                                    <img src="../save/<%= user_email %>/<%= form_id %>/<%= formComponents[i].real_file_name %>" width="300" height="600">
                                </div>
                                
                            </div>
                        </div>
                    <% } %>
                <% } %>
                </form>
                <div>
                    <button type="button" class="btn btn-primary" id='submit'>제출하기</button>
                </div>
        </div>
        <style type="text/css">
            
            /* solution 2: the original datepicker use 20px so replace with the following:*/
            
            .datepicker td, .datepicker th {
                width: 1.5em;
                height: 1.5em;
            }
            
        </style>
        <script type="text/javascript">
            /*
            function submit(){
                var formLen='<%= formComponents.length %>';
                for(i=0;i<formLen;i++){
                    var ans=document.getElementsByName(i).keys;
                    alert(ans);
                    
                }
                
            }
            */
            $('#timepicker').timepicker({
                    uiLibrary: 'bootstrap4'
                });
            window.onload=function(){
                
                $('#datepicker').datepicker({
                    weekStart: 0,
                
                    autoclose: true,
                    todayHighlight: true,
                    language : "ko"
                });
                $('#datepicker').datepicker("setDate", new Date());
                
                $('#submit').click(function(){
                    
                    $('#result').submit();
                
                    /*
                    var params=$('form[id=result]').serialize();
                    var jsonObject=new Object();
                   
                    $.ajax({
                        url:'/result',
                        type:'POST',
                        data : params,
                        dataType:'json',
                        error:function(req,status,error){
                            alert(error);
                        },
                        success:function(data){

                        }
                    })
                    */
                })
                
            }
        </script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <!-- Popper.JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
        <!-- Bootstrap JS -->
        
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
        <!-- jquery-->
        <!--<script src="//code.jquery.com/jquery.min.js"></script>-->
        
        <!-- datapicker-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.ko.min.js"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"></script> -->
    </body>
    
</html>